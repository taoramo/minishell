START

if unpaired parentheses, ", '
	error

if unallowed special characters not in " " or ' '
	error

split string based on && and ||

handle first section





FOR EACH SECTION


if at parentheses:
	call start with whatever is in parentheses
else:
	if section has pipe command:
		split by pipes
		prepare each command
		run pipex
	else:
		prepare command
		execute
	
if $? == 0:
	go to next && section
else:
	go to next || section





PREPARING COMMANDS

skip any number of isspace

if pipe:
	split into commands
	run below

while > or >> left:
	if outfile open:
		close outfile
	open new outfile (truncate if > append if >>)
	remove ">" or ">>" and "outfile"

while < left:
	if infile open:
		close last infile
	open new infile
	remove "<" and "infile"

expand all env variables not in ' '
expand all * not in ' ' or " "
remove all outer level " and ' pairs

split command into argv (keep "< + arg" etc. together)

fork
	child:
		perform (pipe dups for pipe then) file dups
		execve
	parent:
		close folders/pipes
		free everything